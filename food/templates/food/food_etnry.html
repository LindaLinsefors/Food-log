<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>

    <script>
        $(document).ready(function(){

            {% if food_entry %}
                $("#amount").val("{{ food_entry.amount }}")
                $("#quantity").val("{{ food_entry.quantity }}")
                $("#description").text("{{ food_entry.description }}")
                $("#fruit").val("{{ food_entry.fruit }}")
                $("#veg").val("{{ food_entry.veg }}")
                $("#dairy").val("{{ food_entry.dairy }}")
                $("#water").val("{{ food_entry.water }}")
                $("#startch").val("{{ food_entry.startch }}")
                $("#protein").val("{{ food_entry.protein }}")
                $("#junk").val("{{ food_entry.junk }}")
                $("#unknown").val("{{ food_entry.unknown }}")
            {% endif %}

            $(".percent").change(function(){
                $("#unknown").val(
                    100
                    - $("#fruit").val() 
                    - $("#veg").val() 
                    - $("#dairy").val() 
                    - $("#protein").val() 
                    - $("#water").val() 
                    - $("#startch").val() 
                    - $("#junk").val() 
                );
            });                    
        });
    </script>

</head>
<body>
    <form method="POST" name="form"> {% csrf_token %}
        <p>
            <input type="submit" value="Save">
            <a href="{% url 'home' %}">Cancel</a>
            {% if food_entry %}
            <a href="{% url 'delete_food_entry' food_entry.id %}" 
                onclick="return confirm('Are you sure you want to delete?');"
                >Delete</a>
            {% endif %}
        </p>
        <p>
            Amount:
            <input type="text" name="amount" id="amount" 
                maxlength="30" required >
            <input type="number" name="quantity" id="quantity" 
                min="0" step="0.1" required >
        </p>        
        <p>
            <textarea style="width:100%" name="description" id="description" 
                maxlength="500"></textarea>
        </p>
        <p>
            Type:
            <input list="food_stuffs" name="food_stuff" autocomplete="off"          
                maxlength="30">
            <datalist id="food_stuffs">
            {% for food_stuff in food_stuffs %}
                <option value="{{ food_stuff.name }}">
            {% endfor %}
            </datalist>
            <input type="button" id="get_percentages" value="Get percentages">
        </p>
        
        <table style="width:100%">
            <tr>
                <td>Fruit:</td>
                <td><input type="number" name="fruit" id="fruit" 
                        min="0" max="100" class="percent">%</td>
                <td>Veg:</td>
                <td><input type="number" name="veg" id="veg" 
                        min="0" max="100" class="percent">%</td>
            <tr>
            <tr>
                <td>dairy:</td>
                <td><input type="number" name="dairy" id="dairy"
                        min="0" max="100" class="percent">%</td>
                <td>Protein:</td>
                <td><input type="number" name="protein" id="protein"
                        min="0" max="100" class="percent">%</td>
            <tr>
            <tr>
                <td>Water:</td>
                <td><input type="number" name="water" id="water"
                        min="0" max="100" class="percent">%</td>
                <td>Startch:</td>
                <td><input type="number" name="startch" id="startch"
                        min="0" max="100" class="percent">%</td>
            <tr>
            <tr>
                <td>Junk:</td>
                <td><input type="number" name="junk" id="junk"
                        min="0" max="100" class="percent">%</td>
                <td>Unknown:</td>
                <td><input type="number" name="unknown" id="unknown"
                        min="0" max="100" class="percent" 
                        value=100>%</td>
            <tr>
        </table>
    </form>   
</body>
</html>


